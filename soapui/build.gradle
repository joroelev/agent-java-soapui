dependencies {
    compileOnly 'com.smartbear.soapui:soapui:5.4.0'

    compileOnly 'log4j:log4j:1.2.17'
    compile 'com.github.reportportal:client-java:591b7b41'
    compile 'com.github.reportportal:commons-model:feec39f3'
    compile 'com.epam.reportportal:logger-java-log4j:5.0.0-BETA-8'
}

shadowJar {
    dependencies {
        exclude(dependency('com.smartbear.soapui:soapui'))
    }
    archiveName = "agent-java-${archiveName}"
}

task writeAgentProperties(type: WriteProperties) {
    outputFile = file("${project.projectDir}/src/main/resources/agent.properties")
    property('agent.name', project.rootProject.name)
    property('agent.version', project.rootProject.version)
}

compileJava.dependsOn writeAgentProperties